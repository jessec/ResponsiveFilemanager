<!DOCTYPE html>
<html lang="en">
<head>
<link href="assets/bootstrap.min.css" rel="stylesheet">
<link href="assets/bootstrap-responsive.min.css" rel="stylesheet">
<link href="assets/animate.min.css" rel="stylesheet">
<link href="assets/style.css" rel="stylesheet">
<link href="assets/jquery.fancybox-1.3.4.css" rel="stylesheet" />
<link href="assets/font-awesome.min.css" rel="stylesheet">
<link href="assets/prettyPhoto.css" rel="stylesheet" />
</head>
<body>


	<div class="input-append">
		<input id="fieldID" type="text" value=""> <a
			href="http://localhost/ResponsiveFilemanager-master/filemanager/dialog.php?type=1&amp;field_id=fieldID&crossdomain=1"
			class="btn iframe-btn" type="button"
		>Select</a>
	</div>


	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="assets/jquery.browser.min.js"></script>
	<script src="assets/bootstrap.min.js" type="text/javascript"></script>
	<script src="assets/jquery.easing.js" type="text/javascript"></script>
	<script src="assets/jquery.prettyPhoto-3.1.4-W3C.js" type="text/javascript"></script>
	<script src="assets/jquery.ui.totop.js" type="text/javascript"></script>
	<script src="assets/jquery.inview.js" type="text/javascript"></script>
	<script src="assets/jquery.parallax-1.1.3.js" type="text/javascript"></script>
	<script src="assets/jquery.localscroll-1.2.7-min.js" type="text/javascript"></script>
	<script src="assets/jquery.scrollTo-1.4.2-min.js" type="text/javascript"></script>
	<script src="assets/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script>
	<script src="assets/jquery.inview.js" type="text/javascript"></script>
	<script src="assets/jquery.fitvids.min.js" type="text/javascript"></script>
	<script src="assets/jquery.nicescroll.min.js" type="text/javascript"></script>


	<script type="text/javascript">
		jQuery(document).ready(function($) {
			$('.iframe-btn').fancybox({
				'width' : 880,
				'height' : 570,
				'type' : 'iframe',
				'autoScale' : false
			});

			// Handles message from ResponsiveFilemanager
			//
			function OnMessage(e) {
				var event = e.originalEvent;
				// Make sure the sender of the event is trusted
				if (event.data.sender === 'responsivefilemanager') {
					if (event.data.field_id) {
						var fieldID = event.data.field_id;
						var url = event.data.url;
						$('#' + fieldID).val(url).trigger('change');
						$.fancybox.close();

						// Delete handler of the message from ResponsiveFilemanager
						$(window).off('message', OnMessage);
					}
				}
			}

			// Handler for a message from ResponsiveFilemanager
			$('.iframe-btn').on('click', function() {
				$(window).on('message', OnMessage);
			});

		});
	</script>


</body>
</html>
